# Minimal Workflow Example
# Cursor-native execution (no MCP server needed)

workflow:
  name: "Minimal Demo Workflow"
  version: "1.0"
  
  roles:
    developer:
      mode: "agent"
      description: "Implements code"
    
    reviewer:
      mode: "plan"
      description: "Reviews work"
  
  tasks:
    # Stage 1: Create File
    - id: "create_file"
      name: "Create Demo File"
      role: "developer"
      action: "create_file"
      params:
        path: "node_modules/workflow-engine/artifacts/demo.txt"
        content: "Hello from workflow!"
      hitl:
        type: "approval"
        message: "File created. Review and approve to continue?"
      on_complete: "next"
    
    # Stage 2: Modify File
    - id: "modify_file"
      name: "Modify File"
      role: "developer"
      action: "modify_file"
      params:
        path: "node_modules/workflow-engine/artifacts/demo.txt"
        append: "\nModified by workflow stage 2"
      hitl:
        type: "question"
        message: "File modified. Does it look correct?"
        options: ["yes", "no"]
        on_no: "modify_file"  # Retry if no
      on_complete: "next"
    
    # Stage 3: Review
    - id: "review"
      name: "Review Work"
      role: "reviewer"
      action: "review"
      params:
        file: "node_modules/workflow-engine/artifacts/demo.txt"
      hitl:
        type: "question"
        message: "Review complete. Pass or fail?"
        options: ["pass", "fail"]
        on_fail: "modify_file"  # Loop back to modify if fail
      conditions:
        - if: "result == 'pass'"
          then: "complete"
        - if: "result == 'fail'"
          then: "modify_file"
      on_complete: "complete"
    
    # Stage 4: Complete
    - id: "complete"
      name: "Workflow Complete"
      role: "developer"
      action: "complete"
      hitl:
        type: "info"
        message: "âœ… Workflow completed successfully!"
        auto_continue: true
      on_complete: "end"
